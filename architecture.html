<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Architecture - WireClaw</title>
  <meta name="description" content="The full WireClaw architecture. Two loops, eighteen tools, rules that run locally, forever. Deep technical reference.">
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/landing.css">
  <link rel="stylesheet" href="css/learn-more.css">
  <link rel="stylesheet" href="css/architecture.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">
</head>
<body>

  <!-- Navigation -->
  <header class="site-header">
    <div class="container">
      <a href="/" class="logo" aria-label="WireClaw home">
        <img src="assets/logo.svg" width="32" height="32" alt="" aria-hidden="true">
        <span>WireClaw</span>
      </a>
      <nav class="nav-links" aria-label="Main navigation">
        <a href="learn-more.html">Learn More</a>
        <a href="architecture.html">Architecture</a>
        <a href="https://github.com/M64GitHub/WireClaw" target="_blank" rel="noopener" class="btn btn-outline btn-sm">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          GitHub
        </a>
      </nav>
      <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <!-- Page Hero -->
  <section class="page-hero">
    <div class="container">
      <h1 class="reveal">Inside the <span class="accent">Wire</span></h1>
      <p class="reveal" style="--stagger: 1">The full architecture. Two loops. Eighteen tools. Rules that run locally, forever.</p>
    </div>
  </section>

  <!-- The Two Loops -->
  <section class="architecture-deep">
    <div class="container">
      <div class="section-header reveal">
        <h2>Two <span class="accent">Loops</span></h2>
        <p>Everything runs inside a single <code>loop()</code> on a single core.</p>
      </div>
      <div class="arch-steps">
        <div class="arch-step reveal" style="--stagger: 0">
          <div class="arch-step-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
          </div>
          <div>
            <h3>Rule Loop</h3>
            <p>Runs every iteration. Reads sensors, checks conditions, fires actions. No network calls, no LLM, no latency. Edge-triggered: fires once per condition transition, then auto-resets. Persisted to flash - survives reboots.</p>
          </div>
        </div>
        <div class="arch-step reveal" style="--stagger: 1">
          <div class="arch-step-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M12 2a7 7 0 017 7c0 5-7 11-7 11S5 14 5 9a7 7 0 017-7z"/><circle cx="12" cy="9" r="2.5"/></svg>
          </div>
          <div>
            <h3>AI Loop</h3>
            <p>Activates only when a message arrives - via Telegram, serial, or NATS. Calls the LLM through OpenRouter, Ollama, llama.cpp, or any OpenAI-compatible endpoint. HTTP mode for local LLMs saves ~40% RAM. Up to 5 tool-call iterations. Creates rules, registers devices, reads sensors, configures the system.</p>
          </div>
        </div>
      </div>

      <div class="code-block reveal" style="--stagger: 2">
        <span class="code-fn">loop</span>():<br>
        &nbsp;&nbsp;<span class="code-fn">rulesEvaluate</span>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// always runs (incl. clock sensors)</span><br>
        &nbsp;&nbsp;<span class="code-fn">checkTelegram</span>()&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// only if message</span><br>
        &nbsp;&nbsp;<span class="code-fn">checkSerial</span>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// only if message</span><br>
        &nbsp;&nbsp;<span class="code-fn">checkNATS</span>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// only if message</span>
      </div>

      <p class="insight reveal" style="--stagger: 3">The <span class="accent">LLM</span> is the compiler. The <span class="accent">ESP32</span> is the runtime.</p>
    </div>
  </section>

  <!-- From Intent to Automation -->
  <section>
    <div class="container">
      <div class="section-header reveal">
        <h2>From Intent to <span class="accent">Automation</span></h2>
        <p>What happens when you say "When chip temp goes above 45, set LED orange."</p>
      </div>
      <div class="example-timeline">
        <div class="timeline-step reveal" style="--stagger: 0">
          <h4>User sends message</h4>
          <p>"When chip temp goes above 45, set LED orange"</p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 1">
          <h4>AI Loop activates</h4>
          <p>LLM processes the intent, decides to call <code>rule_create</code></p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 2">
          <h4>Rule created</h4>
          <p>Calls <code>rule_create("hot_alert", "chip_temp", "gt", 45, "led_set", "255,140,0")</code></p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 3">
          <h4>Rule persisted</h4>
          <p>Written to <code>/rules.json</code> on flash (~80 bytes). Survives power loss.</p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 4">
          <h4>Rule Loop picks it up</h4>
          <p>Every iteration: reads <code>chip_temp</code>, checks if &gt; 45, fires <code>led_set</code> on transition.</p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 5">
          <h4>Edge-triggered behavior</h4>
          <p>Fires once when condition becomes true. Auto-resets when condition clears. No repeated triggers.</p>
        </div>
        <div class="timeline-step reveal" style="--stagger: 6">
          <h4>Survives reboots</h4>
          <p>On next power-on: loads from flash, resumes evaluation immediately. No re-setup needed.</p>
        </div>
      </div>

      <div class="terminal reveal" style="--stagger: 7; max-width: 720px; margin: var(--space-2xl) auto 0;">
        <div class="terminal-header">
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-title">serial — rule_create via Telegram</span>
        </div>
        <div class="terminal-body" style="min-height: auto; max-height: none; font-size: 0.8rem; line-height: 1.6;">
          <div class="terminal-line user-input" style="color: var(--text-muted); font-weight: 400;">[TG] Message: please set the led to orange, when chip temp is &gt; 27 degrees, and fall back to cyan</div>
          <div class="terminal-line spacer"></div>
          <div class="terminal-line thinking">--- Thinking... ---</div>
          <div class="terminal-line tool-call">[Agent] 2 tool call(s) in iteration 1:</div>
          <div class="terminal-line tool-call">  -&gt; rule_create({"rule_name": "Chip Temp High", "sensor_name": "chip_temp", "condition": "gt", "threshold": 27, "on_action": "led_set", "on_r": 255, "on_g": 165, "on_b": 0, "off_action": "led_set", "off_r": 0, "off_g": 255, "off_b": 255})</div>
          <div class="terminal-line result">     = Rule created: rule_02 'Chip Temp High' - chip_temp &gt; 27 (every 5s) with auto-off</div>
          <div class="terminal-line tool-call">  -&gt; rule_list({})</div>
          <div class="terminal-line result">     = rule_01 'Room Temp Alert' ON room_temp 30 val=25 idle last=426s; rule_02 'Chip Temp High' ON chip_temp 27 val=0 idle last=0s</div>
          <div class="terminal-line spacer"></div>
          <div class="terminal-line response">A rule has been created to set the LED to orange when the chip temperature exceeds 27°C, and it will fall back to cyan when it drops below that threshold.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- The Rule Engine -->
  <section class="architecture-deep">
    <div class="container">
      <div class="section-header reveal">
        <h2>Rule <span class="accent">Engine</span></h2>
        <p>Six conditions. Five action types. Persistent, edge-triggered automation.</p>
      </div>

      <h3 class="reveal" style="text-align: center; margin-bottom: var(--space-xl);">Conditions</h3>
      <div class="ref-grid reveal" style="--stagger: 0">
        <div class="ref-card">
          <div class="ref-card-name">gt</div>
          <p>Greater than threshold. Fires when sensor value exceeds the set point.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">lt</div>
          <p>Less than threshold. Fires when sensor value drops below the set point.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">eq</div>
          <p>Equal to threshold. Fires on exact match (integer comparison).</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">neq</div>
          <p>Not equal. Fires when sensor value differs from the set point.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">change</div>
          <p>Any change. Fires when the sensor value changes from its previous reading.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">always</div>
          <p>Periodic. Fires every <code>interval_seconds</code> (default: evaluation interval). Use for heartbeats, scheduled reports, and watchdogs. Tool output shows last=Xs for verification.</p>
        </div>
      </div>

      <h3 class="reveal" style="text-align: center; margin-top: var(--space-3xl); margin-bottom: var(--space-xl);">Action Types</h3>
      <div class="ref-grid reveal" style="--stagger: 1">
        <div class="ref-card">
          <div class="ref-card-name">actuator</div>
          <p>Set a registered actuator's value - digital, relay, or PWM output by name.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">led_set</div>
          <p>Set the onboard RGB LED to any color. Takes R,G,B values.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">gpio_write</div>
          <p>Write HIGH or LOW to a GPIO pin directly.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">nats_publish</div>
          <p>Publish a message to a NATS subject. Enables rule-triggered device-to-device messaging.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">telegram</div>
          <p>Send a Telegram alert. Configurable cooldown (default 60s) prevents message flooding.</p>
        </div>
      </div>

      <div class="behaviors-list reveal" style="--stagger: 2">
        <div class="behavior-item">Edge-triggered: fires once per transition</div>
        <div class="behavior-item">Auto-off: resets when condition clears</div>
        <div class="behavior-item">Sensor caching: avoids redundant reads</div>
        <div class="behavior-item">Configurable intervals (default 5s)</div>
        <div class="behavior-item">Persistence: /rules.json on flash</div>
        <div class="behavior-item">Telegram cooldown: 60s default</div>
        <div class="behavior-item">always condition: fires every interval_seconds</div>
      </div>

      <div class="terminal reveal" style="--stagger: 3; max-width: 720px; margin: var(--space-2xl) auto 0;">
        <div class="terminal-header">
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-title">serial — /rules</span>
        </div>
        <div class="terminal-body" style="min-height: auto; max-height: none; font-size: 0.8rem; line-height: 1.6;">
          <div class="terminal-line user-input">&gt; /rules</div>
          <div class="terminal-line result">--- rules ---</div>
          <div class="terminal-line response">  rule_01 'Room Temp Alert' [ON] room_temp gt 30 val=25 <span style="color: var(--text-muted);">idle</span></div>
          <div class="terminal-line tool-call">    on:  telegram "Room temperature has reached {value}°C."</div>
          <div class="terminal-line response">  rule_02 'Chip Temp High' [ON] chip_temp gt 27 val=28 <span style="color: var(--led-green);">FIRED</span></div>
          <div class="terminal-line tool-call">    on:  led_set(255,165,0)</div>
          <div class="terminal-line tool-call">    off: led_set(0,255,255)</div>
          <div class="terminal-line response">  rule_03 'Chip Temp Change Alert' [ON] chip_temp change 0 val=28 <span style="color: var(--led-green);">FIRED</span></div>
          <div class="terminal-line tool-call">    on:  telegram "Chip temperature changed to: {value}°C"</div>
          <div class="terminal-line result">---</div>
        </div>
      </div>

      <h3 class="reveal" style="text-align: center; margin-top: var(--space-3xl); margin-bottom: var(--space-xl);">Message Interpolation</h3>
      <div class="ref-grid reveal" style="--stagger: 3; grid-template-columns: repeat(3, 1fr);">
        <div class="ref-card">
          <div class="ref-card-name">{value}</div>
          <p>The triggering sensor's reading at fire time.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">{device_name}</div>
          <p>Any named sensor's live reading (e.g., <code>{chip_temp}</code>).</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">{name:msg}</div>
          <p>Extract the <code>msg</code> field from a JSON NATS payload by device name.</p>
        </div>
      </div>
      <div class="behaviors-list reveal" style="--stagger: 4">
        <div class="behavior-item">Works in Telegram alerts and NATS publish actions</div>
        <div class="behavior-item">127 character max message length</div>
        <div class="behavior-item">Zero heap allocation - stack-based formatting</div>
        <div class="behavior-item">Example: <code>"Temp is {chip_temp}°C"</code> → <code>"Temp is 36.2°C"</code></div>
      </div>
    </div>
  </section>

  <!-- Device Registry -->
  <section>
    <div class="container">
      <div class="section-header reveal">
        <h2>Device <span class="accent">Registry</span></h2>
        <p>Named sensors and actuators. Register once, reference by name everywhere.</p>
      </div>

      <h3 class="reveal" style="text-align: center; margin-bottom: var(--space-xl);">Sensor Types</h3>
      <div class="ref-grid reveal" style="--stagger: 0">
        <div class="ref-card">
          <div class="ref-card-name">digital_in</div>
          <p>Digital input pin. Returns HIGH (1) or LOW (0).</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">analog_in</div>
          <p>Analog input via ADC. Returns raw value (0-4095).</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">ntc_10k</div>
          <p>10K NTC thermistor. Automatic temperature conversion.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">ldr</div>
          <p>Light-dependent resistor. Returns light level reading.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">internal_temp</div>
          <p>Chip's internal temperature sensor. No external hardware needed.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">nats_value</div>
          <p>NATS-subscribed sensor. Receives values published to a configured NATS subject. No GPIO pin. Bridges external systems into the rule engine.</p>
        </div>
      </div>

      <h3 class="reveal" style="text-align: center; margin-top: var(--space-3xl); margin-bottom: var(--space-xl);">Virtual Sensors (Clock)</h3>
      <div class="ref-grid reveal" style="--stagger: 1">
        <div class="ref-card">
          <div class="ref-card-name">clock_hour</div>
          <p>Current hour (0-23). NTP-synced, POSIX timezone + DST.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">clock_minute</div>
          <p>Current minute (0-59). Updates every rule evaluation cycle.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">clock_hhmm</div>
          <p>Combined time as hour*100+minute (e.g., 1830 = 6:30 PM). Use with <code>eq</code> for scheduled rules.</p>
        </div>
      </div>

      <h3 class="reveal" style="text-align: center; margin-top: var(--space-3xl); margin-bottom: var(--space-xl);">Actuator Types</h3>
      <div class="ref-grid reveal" style="--stagger: 1">
        <div class="ref-card">
          <div class="ref-card-name">digital_out</div>
          <p>Digital output pin. Set HIGH or LOW.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">relay</div>
          <p>Relay control. On/off switching for higher-power loads.</p>
        </div>
        <div class="ref-card">
          <div class="ref-card-name">pwm</div>
          <p>PWM output. Variable duty cycle for dimmers, motors, servos.</p>
        </div>
      </div>

      <div class="terminal reveal" style="--stagger: 2; max-width: 720px; margin: var(--space-2xl) auto 0;">
        <div class="terminal-header">
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-dot"></span>
          <span class="terminal-title">serial — /devices</span>
        </div>
        <div class="terminal-body" style="min-height: auto; max-height: none; font-size: 0.8rem; line-height: 1.6;">
          <div class="terminal-line user-input">&gt; /devices</div>
          <div class="terminal-line result">--- devices ---</div>
          <div class="terminal-line response">  chip_temp <span style="color: var(--text-muted);">[internal_temp]</span> pin=255  = 27.7 C</div>
          <div class="terminal-line response">  clock_hour <span style="color: var(--text-muted);">[clock_hour]</span> pin=255  = 4.0 h</div>
          <div class="terminal-line response">  clock_minute <span style="color: var(--text-muted);">[clock_minute]</span> pin=255  = 11.0 m</div>
          <div class="terminal-line response">  clock_hhmm <span style="color: var(--text-muted);">[clock_hhmm]</span> pin=255  = 411.0</div>
          <div class="terminal-line response">  room_temp <span style="color: var(--text-muted);">[nats_value]</span> nats=home.room.temp  = 0.0 C</div>
          <div class="terminal-line result">---</div>
        </div>
      </div>

      <p class="insight reveal" style="--stagger: 3"><code>chip_temp</code> and three clock sensors (<code>clock_hour</code>, <code>clock_minute</code>, <code>clock_hhmm</code>) are pre-registered on first boot. Persisted to <code>/devices.json</code>. NATS sensors (<code>nats_value</code>) register on demand - subscribe to any subject, feed external data into rules.</p>
    </div>
  </section>

  <!-- All 18 Tools -->
  <section id="tools" class="architecture-deep">
    <div class="container">
      <div class="section-header reveal">
        <h2>All 18 <span class="accent">Tools</span></h2>
        <p>The complete tool reference, grouped by category.</p>
      </div>

      <div class="tools-category reveal" style="--stagger: 0">
        <div class="tools-category-title">Hardware</div>
        <div class="tools-grid">
          <div class="tool-card">
            <div class="tool-name">led_set</div>
            <span class="tool-badge">LED</span>
            <p>Control the onboard RGB LED. Set any color with R, G, B values (0-255). Visual feedback for every action.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">gpio_write</div>
            <span class="tool-badge">GPIO</span>
            <p>Drive output pins HIGH or LOW. Control relays, motors, actuators, or any digital output connected to a GPIO pin.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">gpio_read</div>
            <span class="tool-badge">GPIO</span>
            <p>Read digital and analog values from any GPIO pin. Supports ADC readings for sensors, voltage dividers, and switches.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">temperature_read</div>
            <span class="tool-badge">Sensor</span>
            <p>Read the ESP32-C6 internal temperature sensor directly. Returns degrees Celsius. No external hardware required.</p>
          </div>
        </div>
      </div>

      <div class="tools-category reveal" style="--stagger: 1">
        <div class="tools-category-title">Device Registry</div>
        <div class="tools-grid">
          <div class="tool-card">
            <div class="tool-name">device_register</div>
            <span class="tool-badge">Registry</span>
            <p>Register a named sensor or actuator. Specify name, type (digital_in, analog_in, ntc_10k, etc.), and GPIO pin. Persisted to flash.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">device_list</div>
            <span class="tool-badge">Registry</span>
            <p>List all registered devices with their names, types, pins, and current values. Shows both sensors and actuators.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">device_remove</div>
            <span class="tool-badge">Registry</span>
            <p>Remove a registered device by name. Cleans up the registry entry and updates the persisted file.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">sensor_read</div>
            <span class="tool-badge">Registry</span>
            <p>Read a sensor by its registered name. Automatically handles type-specific conversions (NTC to Celsius, raw ADC, etc.).</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">actuator_set</div>
            <span class="tool-badge">Registry</span>
            <p>Set a named actuator's output value. Supports digital on/off, relay switching, and PWM duty cycle control.</p>
          </div>
        </div>
      </div>

      <div class="tools-category reveal" style="--stagger: 2">
        <div class="tools-category-title">Rule Engine</div>
        <div class="tools-grid">
          <div class="tool-card">
            <div class="tool-name">rule_create</div>
            <span class="tool-badge">Rules</span>
            <p>Create a persistent automation rule. Specify name, sensor, condition, threshold, and action. Immediately active and persisted to flash.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">rule_list</div>
            <span class="tool-badge">Rules</span>
            <p>List all rules with conditions, actions, enabled state, last trigger time, and current evaluation status.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">rule_delete</div>
            <span class="tool-badge">Rules</span>
            <p>Delete a rule by name. Removes from active evaluation and from the persisted rules file. Takes effect immediately.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">rule_enable</div>
            <span class="tool-badge">Rules</span>
            <p>Enable or disable a rule without deleting it. Disabled rules are preserved but skip evaluation.</p>
          </div>
        </div>
      </div>

      <div class="tools-category reveal" style="--stagger: 3">
        <div class="tools-category-title">System</div>
        <div class="tools-grid">
          <div class="tool-card">
            <div class="tool-name">device_info</div>
            <span class="tool-badge">System</span>
            <p>Query system information: free heap, uptime, WiFi RSSI, chip temperature, flash usage, and firmware version.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">file_read</div>
            <span class="tool-badge">Flash FS</span>
            <p>Read any file from the LittleFS flash filesystem. Access configs, rules, device registry, logs, or custom data files.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">file_write</div>
            <span class="tool-badge">Flash FS</span>
            <p>Write data to the flash filesystem. Create or update config files, persist sensor readings, store notes or custom data.</p>
          </div>
          <div class="tool-card">
            <div class="tool-name">nats_publish</div>
            <span class="tool-badge">Messaging</span>
            <p>Publish messages to NATS subjects. Enables device-to-device communication, event broadcasting, and IoT mesh coordination.</p>
          </div>
        </div>
      </div>

      <div class="tools-category reveal" style="--stagger: 4">
        <div class="tools-category-title">Communication</div>
        <div class="tools-grid">
          <div class="tool-card">
            <div class="tool-name">remote_chat</div>
            <span class="tool-badge">Multi-Device</span>
            <p>Send a natural language message to another WireClaw device by name. NATS-based request/reply with 30-second timeout.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Try With Just a Dev Board -->
  <section>
    <div class="container">
      <div class="section-header reveal">
        <h2>Try With Just a <span class="accent">Dev Board</span></h2>
        <p>No external hardware needed. <code>chip_temp</code> sensor + onboard RGB LED = full demo.</p>
      </div>
      <div class="try-examples">
        <div class="try-example reveal" style="--stagger: 0">What's the chip temperature?</div>
        <div class="try-example reveal" style="--stagger: 1">Set the LED to blue</div>
        <div class="try-example reveal" style="--stagger: 2">When chip temp goes above 28, set LED orange</div>
        <div class="try-example reveal" style="--stagger: 3">List my rules</div>
        <div class="try-example reveal" style="--stagger: 4">Every day at 8 AM, send me the temp on Telegram</div>
        <div class="try-example reveal" style="--stagger: 5">My favorite color is purple. Remember that.</div>
        <div class="try-example reveal" style="--stagger: 6">Ask garden-node what its soil moisture is</div>
        <div class="try-example reveal" style="--stagger: 7">Send me a Telegram every 2 minutes saying "system OK"</div>
        <div class="try-example reveal" style="--stagger: 8">Register a NATS sensor called room_temp on subject home.room.temp</div>
      </div>
    </div>
  </section>

  <!-- Boot Sequence -->
  <section class="architecture-deep">
    <div class="container">
      <div class="section-header reveal">
        <h2>Boot <span class="accent">Sequence</span></h2>
        <p>What happens when you power on.</p>
      </div>
      <div class="boot-sequence reveal">
        <div class="boot-step"><span class="boot-step-num">1</span> Init hardware</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">2</span> Load config</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">3</span> Connect WiFi</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">4</span> NTP sync</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">5</span> Connect NATS</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">6</span> Load rules</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">7</span> Load devices</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">8</span> Load history</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">9</span> Load memory</div>
        <span class="boot-arrow" aria-hidden="true">→</span>
        <div class="boot-step"><span class="boot-step-num">10</span> Start dual loop</div>
      </div>
    </div>
  </section>

  <!-- GitHub CTA -->
  <section class="github-cta">
    <div class="container">
      <h2 class="reveal">Ready to Put AI on the <span class="accent">Wire</span>?</h2>
      <a href="https://github.com/M64GitHub/WireClaw" target="_blank" rel="noopener" class="btn btn-primary reveal" style="--stagger: 1">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
        View on GitHub
      </a>
      <br>
      <a href="/" class="back-link reveal" style="--stagger: 2">← Back to Home</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-logo">
        <img src="assets/logo.svg" width="28" height="28" alt="" aria-hidden="true">
        <span>WireClaw</span>
      </div>
      <nav class="footer-links" aria-label="Footer navigation">
        <a href="/">Home</a>
        <a href="learn-more.html">Learn More</a>
        <a href="https://github.com/M64GitHub/WireClaw" target="_blank" rel="noopener">GitHub</a>
      </nav>
      <span class="footer-copy">&copy; 2026 Mario Schallner</span>
    </div>
  </footer>

  <script defer src="js/nav.js"></script>
  <script defer src="js/scroll-reveal.js"></script>
</body>
</html>
